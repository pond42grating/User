<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pending User Approval</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js"></script>
</head>
<body>
  <script>
    // Initialize Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyAXZgxM6PU-T3D2811KnBszblRWju7rv1Y",
      authDomain: "dws-management.firebaseapp.com",
      projectId: "dws-management",
      storageBucket: "dws-management.firebasestorage.app",
      messagingSenderId: "23827231923",
      appId: "1:23827231923:web:97141b6d19c7cd109d2cc6",
      measurementId: "G-L14GLJDYW7"
    };
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Function to fetch users with isApproved: false
    async function fetchPendingUsers() {
      try {
        const usersRef = db.collection('Users');
        const querySnapshot = await usersRef.where('isApproved', '==', false).get();
        console.log('Pending Users:');
        querySnapshot.forEach(doc => {
          console.log(`User ID: ${doc.id}`, doc.data());
        });
      } catch (error) {
        console.error('Error fetching pending users:', error);
      }
    }

    // Function to update a user's approval status
    async function approveUser(userId) {
      try {
        await db.collection('Users').doc(userId).update({ isApproved: true });
        console.log(`User ${userId} is now approved.`);
      } catch (error) {
        console.error('Error approving user:', error);
      }
    }

    // Example usage
    // Fetch and log pending users
    fetchPendingUsers();

    // Approve a user by passing their user ID (replace 'replace-with-user-id' with actual ID)
    // Example: approveUser('exampleUserId123');
  </script>
</body>
</html>